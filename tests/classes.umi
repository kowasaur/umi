class Person {
    mut String name
    Int age

    Person(String name, Int a) {
        this.name = name
        age = a
        print("Making " + name + " caused a side effect")
    }

    Void introduce() {
        Console.write("Hello I am " + name + ", ")
        print(this.age)
    }

    # Returns the Person's age after `years` years
    Int ageAfterYears(Int years) { age + years }
}

il class IntList "class [mscorlib]System.Collections.Generic.List`1<int32>" {
    ilf IntList() ".ctor"
    il Void add(Int) "callvirt void class [mscorlib]System.Collections.Generic.List`1<int32>::Add(!0)"
    il Int get(Int) "callvirt !0 class [mscorlib]System.Collections.Generic.List`1<int32>::get_Item(int32)"
}

IntList add10(IntList i) {
    i.add(10)
    i
}

class Logger {
    static mut String everything_logged

    static Logger() { everything_logged = "" }

    static Void log(String message) {
        print(message)
        everything_logged = everything_logged + message + "\n"
    }
}

Void main() {
    Person p = Person("Larry", 63)
    print(p.name)
    print(p.age)
    p.name = "Barry"
    p.introduce()
    print(p.ageAfterYears(15))

    mut IntList list = IntList()
    list = add10(list)
    list = add10(list)
    print(list.get(1))

    Logger.log("This is a message")
    Logger.log("pog")
    Logger.log("I don't know what to write")
    print(Logger.everything_logged)
}
